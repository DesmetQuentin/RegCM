<HTML>

<HEAD>
<TITLE>mod_clm.F90</TITLE>
</HEAD>

<BODY background="back_granite.gif">
<FONT COLOR="#000000" FACE="Times">
<H1 ALIGN=CENTER>mod_clm.F90</H1>
<HR>
<H2 ALIGN=CENTER>mod_clm.F90</H2>
<HR>
</FONT>

<HR>

<PRE>
1: !::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
2: !
3: !    This file is part of ICTP RegCM.
4: !
5: !    ICTP RegCM is free software: you can redistribute it and/or modify
6: !    it under the terms of the GNU General Public License as published by
7: !    the Free Software Foundation, either version 3 of the License, or
8: !    (at your option) any later version.
9: !
10: !    ICTP RegCM is distributed in the hope that it will be useful,
11: !    but WITHOUT ANY WARRANTY; without even the implied warranty of
12: !    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
13: !    GNU General Public License for more details.
14: !
15: !    You should have received a copy of the GNU General Public License
16: !    along with ICTP RegCM.  If not, see <http://www.gnu.org/licenses/>.
17: !
18: !::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
19: 
20: #ifdef CLM
21: 
<p><a name=mod_clm><H3>mod_clm</H3></a></p>22:       module mod_clm
23: 
24:       use <a href="./mod_dynparam.F90.html#mod_dynparam" TARGET=CENT_PANEL>mod_dynparam</a>
25: 
26:       implicit none
27: 
28: #ifdef MPP1
29: 
30:       integer :: imask
31:       real(8) :: clmfrq
32: 
33:       integer :: r2cdtime      ! timestep in seconds
34:       integer :: r2cnsrest     ! 0=initial, 1=restart
35:       integer :: r2cnestep     ! final timestep (or day if negative) number
36:       integer :: r2cnelapse    ! # of timesteps (or days if negative) 
37:                                ! to extend a run
38:       integer :: r2cnstep      ! current timestep (ktau)
39: 
40:       integer :: r2cstart_ymd  ! starting date for run in yearmmdd format
41:       integer :: r2cstart_tod  ! starting time of day for run in seconds
42:       integer :: r2cstop_ymd   ! stopping date for run in yearmmdd format
43:       integer :: r2cstop_tod   ! stopping time of day for run in seconds
44:       integer :: r2cref_ymd    ! reference date for time coordinate 
45:                                ! in yearmmdd format
46:       integer :: r2cref_tod    ! reference time of day for time 
47:                                ! coordinate in seconds
48: 
49:       character(len=32) :: r2cclndr ! Calendar type ('NO_LEAP' or 'GREGORIAN')
50: 
51:       logical :: r2cwrtdia     ! write output true/false
52:       integer :: r2cirad       ! radiation calculation 
53:       integer :: r2cmss_irt    ! NCAR mass store retention time set to 0
54: 
55:       integer :: r2clsmlon     ! number of longitude points
56:       integer :: r2clsmlat     ! number of latitude points
57:       real(8) :: r2cdx         ! model resolution (m)
58:       real(8) :: r2carea       ! area of each grid cell (km^2)
59:       real(8) :: r2cedgen      ! N edge of grid
60:       real(8) :: r2cedges      ! S edge of grid
61:       real(8) :: r2cedgee      ! E edge of grid
62:       real(8) :: r2cedgew      ! W edge of grid
63: 
64:       real(8) :: r2ceccen      ! orbital eccentricity
65:       real(8) :: r2cobliqr     ! Earths obliquity in rad
66:       real(8) :: r2clambm0     ! Mean long of perihelion at
67:                                ! vernal equinox (radians)
68:       real(8) :: r2cmvelpp     ! moving vernal equinox long
69:       real(8) :: r2ceccf       ! Earth-sun distance factor (1/r)**2
70: 
71:       logical :: r2cdoalb      ! time for next albedo call
72: 
73:       integer :: c2rcnts
74: 
75:       real(8) , target , allocatable , dimension(:,:,:) :: clmspace
76:       private :: clmspace
77: 
78:       real(8) , pointer , dimension(:,:) :: r2ctb_all   
79:       real(8) , pointer , dimension(:,:) :: r2cqb_all    
80:       real(8) , pointer , dimension(:,:) :: r2czga_all   
81:       real(8) , pointer , dimension(:,:) :: r2cpsb_all   
82:       real(8) , pointer , dimension(:,:) :: r2cuxb_all   
83:       real(8) , pointer , dimension(:,:) :: r2cvxb_all   
84:       real(8) , pointer , dimension(:,:) :: r2crnc_all   
85:       real(8) , pointer , dimension(:,:) :: r2crnnc_all  
86:       real(8) , pointer , dimension(:,:) :: r2csols_all  
87:       real(8) , pointer , dimension(:,:) :: r2csoll_all  
88:       real(8) , pointer , dimension(:,:) :: r2csolsd_all 
89:       real(8) , pointer , dimension(:,:) :: r2csolld_all
90:       real(8) , pointer , dimension(:,:) :: r2cflwd_all
91:       real(8) , pointer , dimension(:,:) :: r2ccosz_all
92:       real(8) , pointer , dimension(:,:) :: r2cxlat_all     ! xlat in radians
93:       real(8) , pointer , dimension(:,:) :: r2cxlon_all     ! xlon in radians
94:       real(8) , pointer , dimension(:,:) :: r2cxlatd_all    ! xlat in degrees
95:       real(8) , pointer , dimension(:,:) :: r2cxlond_all    ! xlon in degrees
96:       real(8) , pointer , dimension(:,:) :: c2rtgb
97:       real(8) , pointer , dimension(:,:) :: c2rsenht
98:       real(8) , pointer , dimension(:,:) :: c2rlatht
99:       real(8) , pointer , dimension(:,:) :: c2ralbdirs
100:       real(8) , pointer , dimension(:,:) :: c2ralbdirl
101:       real(8) , pointer , dimension(:,:) :: c2ralbdifs
102:       real(8) , pointer , dimension(:,:) :: c2ralbdifl
103:       real(8) , pointer , dimension(:,:) :: c2rtaux
104:       real(8) , pointer , dimension(:,:) :: c2rtauy
105:       real(8) , pointer , dimension(:,:) :: c2ruvdrag
106:       real(8) , pointer , dimension(:,:) :: c2rlsmask
107:       real(8) , pointer , dimension(:,:) :: c2rtgbb
108:       real(8) , pointer , dimension(:,:) :: c2rcosz
109:       real(8) , pointer , dimension(:,:) :: c2rsnowc
110:       real(8) , pointer , dimension(:,:) :: c2rtest
111:       real(8) , pointer , dimension(:,:) :: c2r2mt
112:       real(8) , pointer , dimension(:,:) :: c2r2mq
113:       real(8) , pointer , dimension(:,:) :: c2rtlef
114:       real(8) , pointer , dimension(:,:) :: c2ru10
115:       real(8) , pointer , dimension(:,:) :: c2rsm10cm
116:       real(8) , pointer , dimension(:,:) :: c2rsm1m
117:       real(8) , pointer , dimension(:,:) :: c2rsmtot
118:       real(8) , pointer , dimension(:,:) :: c2rinfl
119:       real(8) , pointer , dimension(:,:) :: c2rro_sur
120:       real(8) , pointer , dimension(:,:) :: c2rro_sub
121:       real(8) , pointer , dimension(:,:) :: c2rfracsno      
122:       real(8) , pointer , dimension(:,:) :: c2rfvegnosno 
123:       integer , allocatable , dimension(:,:) :: c2rprocmap
124:       integer , allocatable , dimension(:) :: c2rngc
125:       integer , allocatable , dimension(:) :: c2rdisps
126: 
127: #endif
128: 
129:       contains
130: 
<p><a name=allocate_mod_clm><H3>allocate_mod_clm</H3></a></p> Click <a href="./callingtree/allocate_mod_clm_rite.html" TARGET=RITE_PANEL>HERE</a> to see the where allocate_mod_clm is used.
<hr>
131:       subroutine allocate_mod_clm
132:       implicit none
133: !     About the dimension ordering:
134: !     regcm: ix=lat,jx=lon, arrays are lat by lon
135: !     clm: i=lon, j=lat, arrays are lon by lat
136: #ifdef MPP1
137:       allocate(clmspace(jx,iy,45))
138:       r2ctb_all     => clmspace(:,:,1)
139:       r2cqb_all     => clmspace(:,:,2)
140:       r2czga_all    => clmspace(:,:,3)
141:       r2cpsb_all    => clmspace(:,:,4)
142:       r2cuxb_all    => clmspace(:,:,5)
143:       r2cvxb_all    => clmspace(:,:,6)
144:       r2crnc_all    => clmspace(:,:,7)
145:       r2crnnc_all   => clmspace(:,:,8)
146:       r2csols_all   => clmspace(:,:,9)
147:       r2csoll_all   => clmspace(:,:,10)
148:       r2csolsd_all  => clmspace(:,:,11)
149:       r2csolld_all  => clmspace(:,:,12)
150:       r2cflwd_all   => clmspace(:,:,13)
151:       r2ccosz_all   => clmspace(:,:,14)
152:       r2cxlat_all   => clmspace(:,:,15)
153:       r2cxlon_all   => clmspace(:,:,16)
154:       r2cxlatd_all  => clmspace(:,:,17)
155:       r2cxlond_all  => clmspace(:,:,18)
156:       c2rtgb        => clmspace(:,:,19)
157:       c2rsenht      => clmspace(:,:,20)
158:       c2rlatht      => clmspace(:,:,21)
159:       c2ralbdirs    => clmspace(:,:,22)
160:       c2ralbdirl    => clmspace(:,:,23)
161:       c2ralbdifs    => clmspace(:,:,24)
162:       c2ralbdifl    => clmspace(:,:,25)
163:       c2rtaux       => clmspace(:,:,26)
164:       c2rtauy       => clmspace(:,:,27)
165:       c2ruvdrag     => clmspace(:,:,28)
166:       c2rlsmask     => clmspace(:,:,29)
167:       c2rtgbb       => clmspace(:,:,30)
168:       c2rcosz       => clmspace(:,:,31)
169:       c2rsnowc      => clmspace(:,:,32)
170:       c2rtest       => clmspace(:,:,33)
171:       c2r2mt        => clmspace(:,:,34)
172:       c2r2mq        => clmspace(:,:,35)
173:       c2rtlef       => clmspace(:,:,36)
174:       c2ru10        => clmspace(:,:,37)
175:       c2rsm10cm     => clmspace(:,:,38)
176:       c2rsm1m       => clmspace(:,:,39)
177:       c2rsmtot      => clmspace(:,:,40)
178:       c2rinfl       => clmspace(:,:,41)
179:       c2rro_sur     => clmspace(:,:,42)
180:       c2rro_sub     => clmspace(:,:,43)
181:       c2rfracsno    => clmspace(:,:,44)
182:       c2rfvegnosno  => clmspace(:,:,45)
183:       allocate(c2rprocmap(jx,iy))
184:       allocate(c2rngc(nproc))
185:       allocate(c2rdisps(nproc))
186: #endif
187:       end subroutine allocate_mod_clm
188: 
189:       end module mod_clm
190: 
191: #endif
</PRE>

<HR>

</BODY>
</HTML>
