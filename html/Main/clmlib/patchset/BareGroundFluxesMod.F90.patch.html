<HTML>

<HEAD>
<TITLE>BareGroundFluxesMod.F90.patch</TITLE>
</HEAD>

<BODY background="back_granite.gif">
<FONT COLOR="#000000" FACE="Times">
<H1 ALIGN=CENTER>clmlib/patchset/BareGroundFluxesMod.F90.patch</H1>
<HR>
<H2 ALIGN=CENTER>BareGroundFluxesMod.F90.patch</H2>
<HR>
</FONT>

<HR>

<PRE>
<OL>
<LI>--- orig/BareGroundFluxesMod.F90	2010-03-10 16:34:21.000000000 +0100
<LI>+++ patchd/BareGroundFluxesMod.F90	2010-03-10 16:20:01.730267643 +0100
<LI>@@ -132,6 +132,9 @@
<LI>     real(r8), pointer :: fpsn(:)          ! photosynthesis (umol CO2 /m**2 /s)
<LI>     real(r8), pointer :: rootr(:,:)       ! effective fraction of roots in each soil layer
<LI>     real(r8), pointer :: rresis(:,:)      ! root resistance by layer (0-1)  (nlevsoi)	
<LI>+!abt rcm 
<LI>+    real(r8), pointer :: uvdrag(:)        ! surface wind drag
<LI>+!above rcm
<LI> !
<LI> !EOP
<LI> !
<LI>@@ -233,6 +236,9 @@
<LI>     psnsun => clm3%g%l%c%p%pcf%psnsun
<LI>     psnsha => clm3%g%l%c%p%pcf%psnsha
<LI>     fpsn => clm3%g%l%c%p%pcf%fpsn
<LI>+!abt rcm below
<LI>+    uvdrag => clm3%g%l%c%p%pef%uvdrag
<LI>+!rcm above
<LI> 
<LI>     ! Filter pfts where frac_veg_nosno is zero
<LI> 
<LI>@@ -371,6 +377,10 @@
<LI>        eflx_sh_tot(p)   = eflx_sh_grnd(p)
<LI>        qflx_evap_soi(p) = -raiw*dqh(p)
<LI>        qflx_evap_tot(p) = qflx_evap_soi(p)
<LI>+!abt rcm belwo
<LI>+       uvdrag(p)        = (1-frac_veg_nosno(p))*forc_rho(g)/ram
<LI>+!rcm above
<LI>+
<LI> 
<LI>        ! 2 m height air temperature
<LI> 
</OL>
</PRE>

<HR>

</BODY>
</HTML>
