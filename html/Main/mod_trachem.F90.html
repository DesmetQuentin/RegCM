<HTML>

<HEAD>
<TITLE>mod_trachem.F90</TITLE>
</HEAD>

<BODY background="back_granite.gif">
<FONT COLOR="#000000" FACE="Times">
<H1 ALIGN=CENTER>mod_trachem.F90</H1>
<HR>
<H2 ALIGN=CENTER>mod_trachem.F90</H2>
<HR>
</FONT>

<HR>

<PRE>
1: !::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
2: !
3: !    This file is part of ICTP RegCM.
4: !
5: !    ICTP RegCM is free software: you can redistribute it and/or modify
6: !    it under the terms of the GNU General Public License as published by
7: !    the Free Software Foundation, either version 3 of the License, or
8: !    (at your option) any later version.
9: !
10: !    ICTP RegCM is distributed in the hope that it will be useful,
11: !    but WITHOUT ANY WARRANTY; without even the implied warranty of
12: !    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
13: !    GNU General Public License for more details.
14: !
15: !    You should have received a copy of the GNU General Public License
16: !    along with ICTP RegCM.  If not, see <http://www.gnu.org/licenses/>.
17: !
18: !::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
19: 
<p><a name=mod_trachem><H3>mod_trachem</H3></a></p>20:       module mod_trachem
21: 
22:       use <a href="./mod_dynparam.F90.html#mod_dynparam" TARGET=CENT_PANEL>mod_dynparam</a>
23: 
24:       implicit none
25: !
26:       integer , parameter :: maxntr = 20
27:       integer , parameter :: maxnbin = 20
28: 
29:       character(5) , allocatable , dimension(:) :: chtrname
30: !
31:       real(8) , allocatable , dimension(:,:) :: chtrdpv
32:       real(8) , allocatable , dimension(:,:) :: chtrsize , dustbsiz
33:       real(8) , allocatable , dimension(:) :: chtrsol
34: !
35:       integer :: ichcumtra , ichdrdepo , ichremcvc , ichremlsc ,        &
36:                & ichsursrc
37:       integer , allocatable, dimension(:,:) :: icumbot , icumdwd ,      &
38:                & icumtop
39: !
40:       integer :: ibchb , ibchl , iochb , iochl , iso2 , iso4 , mixtype
41:       integer , allocatable , dimension(:) :: idust
42: !
43:       real(8) , allocatable , dimension(:,:) :: mflx
44: !
45:       real(8) , allocatable , dimension(:,:,:) :: aerasp , aerext ,     &
46:                                 & aerssa
47:       real(8) , allocatable , dimension(:,:) :: aersrrf , aertarf
48:       real(8) , allocatable , dimension(:,:) :: aertalwrf , aersrlwrf 
49: !
50:       real(8) , allocatable , dimension(:,:,:) :: cemtr , cemtrac ,     &
51:                         & remdrd
52:       real(8) , allocatable , dimension(:,:) :: rembc , remrat
53:       real(8) , allocatable , dimension(:,:,:,:) :: remcvc , remlsc ,   &
54:                         & rxsaq1 , rxsaq2 , rxsg
55: 
56:       contains
57: 
<p><a name=allocate_mod_trachem><H3>allocate_mod_trachem</H3></a></p> Click <a href="./callingtree/allocate_mod_trachem_rite.html" TARGET=RITE_PANEL>HERE</a> to see the where allocate_mod_trachem is used.
<hr>
58:         subroutine allocate_mod_trachem
59:         use <a href="./mod_message.F90.html#mod_message" TARGET=CENT_PANEL>mod_message</a> , only : say , aline
60:         implicit none
61:         if ( ntr>maxntr ) then
62:           write (aline , *) 'In mod_trachem, resetting ntr to maxntr ', &
63:                  maxntr
64:           call <a href="./mod_message.F90.html#say" TARGET=CENT_PANEL>say</a>
65:           ntr = maxntr
66:         end if
67:         if ( nbin>maxnbin ) then
68:           write (aline , *) 'In mod_trachem, resetting nbin to maxbin ',&
69:                  maxnbin
70:           call <a href="./mod_message.F90.html#say" TARGET=CENT_PANEL>say</a>
71:           nbin = maxnbin
72:         end if
73: #ifdef MPP1
74:         allocate(icumbot(iy,jxp))
75:         allocate(icumdwd(iy,jxp))
76:         allocate(icumtop(iy,jxp)) 
77:         allocate(aerasp(iym1,kz,jxp))
78:         allocate(aerext(iym1,kz,jxp))
79:         allocate(aerssa(iym1,kz,jxp))
80:         allocate(aersrrf(iym1,jxp))
81:         allocate(aertalwrf(iym1,jxp))
82:         allocate(aersrlwrf(iym1,jxp))
83: 
84:         allocate(aertarf(iym1,jxp))
85:         allocate(cemtr(iy,jxp,ntr))
86:         allocate(cemtrac(iy,jxp,ntr))
87:         allocate(remdrd(iy,jxp,ntr))
88:         allocate(remcvc(iy,kz,jxp,ntr))
89:         allocate(remlsc(iy,kz,jxp,ntr))
90:         allocate(rxsaq1(iy,kz,jxp,ntr))
91:         allocate(rxsaq2(iy,kz,jxp,ntr))
92:         allocate(rxsg(iy,kz,jxp,ntr))
93: #else
94:         allocate(icumbot(iy,jx))
95:         allocate(icumdwd(iy,jx))
96:         allocate(icumtop(iy,jx))
97:         allocate(aerasp(iym1,kz,jxm1))
98:         allocate(aerext(iym1,kz,jxm1))
99:         allocate(aerssa(iym1,kz,jxm1))
100:         allocate(aersrrf(iym1,jxm1))
101:         allocate(aertarf(iym1,jxm1))
102:         allocate(aertalwrf(iym1,jxm1))
103:         allocate(aersrlwrf(iym1,jxm1))
104: 
105:         allocate(cemtr(iy,jx,ntr))
106:         allocate(cemtrac(iy,jx,ntr))
107:         allocate(remdrd(iy,jx,ntr))
108:         allocate(remcvc(iy,kz,jx,ntr))
109:         allocate(remlsc(iy,kz,jx,ntr))
110:         allocate(rxsaq1(iy,kz,jx,ntr))
111:         allocate(rxsaq2(iy,kz,jx,ntr))
112:         allocate(rxsg(iy,kz,jx,ntr))
113: #endif 
114:         allocate(chtrname(ntr))
115:         allocate(chtrdpv(ntr,2))
116:         allocate(chtrsize(nbin,2))
117:         allocate(dustbsiz(nbin,2))
118:         allocate(chtrsol(ntr))
119:         allocate(idust(nbin))
120:         allocate(mflx(iy,2))
121:         allocate(rembc(iy,kz))
122:         allocate(remrat(iy,kz))
123: 
124:         end subroutine allocate_mod_trachem
125: 
126:       end module mod_trachem
</PRE>

<HR>

</BODY>
</HTML>
