<HTML>

<HEAD>
<TITLE>readcdfr4.f90</TITLE>
</HEAD>

<BODY background="back_granite.gif">
<FONT COLOR="#000000" FACE="Times">
<H1 ALIGN=CENTER>readcdfr4.f90</H1>
<HR>
<H2 ALIGN=CENTER>readcdfr4.f90</H2>
<HR>
</FONT>

<HR>

<PRE>
1: !::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
2: !
3: !    This file is part of ICTP RegCM.
4: !
5: !    ICTP RegCM is free software: you can redistribute it and/or modify
6: !    it under the terms of the GNU General Public License as published by
7: !    the Free Software Foundation, either version 3 of the License, or
8: !    (at your option) any later version.
9: !
10: !    ICTP RegCM is distributed in the hope that it will be useful,
11: !    but WITHOUT ANY WARRANTY; without even the implied warranty of
12: !    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
13: !    GNU General Public License for more details.
14: !
15: !    You should have received a copy of the GNU General Public License
16: !    along with ICTP RegCM.  If not, see <http://www.gnu.org/licenses/>.
17: !
18: !::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
19: 
<p><a name=readcdfr4><H3>readcdfr4</H3></a></p> Click <a href="./callingtree/readcdfr4_rite.html" TARGET=RITE_PANEL>HERE</a> to see the where readcdfr4 is used.
<hr>
20:       subroutine readcdfr4(idcdf,vnam,lnam,units,nlon1,nlon,nlat1,nlat, &
21:                          & nlev1,nlev,ntim1,ntim,vals)
22:  
23:       use <a href="#" TARGET=CENT_PANEL>netcdf</a>
24:       implicit none
25: !
26: ! Dummy arguments
27: !
28:       integer :: idcdf , nlat , nlat1 , nlev , nlev1 , nlon , nlon1 ,   &
29:                & ntim , ntim1
30:       character(64) :: lnam , units , vnam
31:       real(4) , dimension(nlon,nlat,nlev,ntim) :: vals
32:       intent (in) nlat , nlat1 , nlev , nlev1 , nlon , nlon1 , ntim ,   &
33:                 & ntim1
34: !
35: ! Local variables
36: !
37:       integer , dimension(4) :: icount , istart
38:       integer :: iflag , invarid
39: !     /*get variable and attributes*/
40:       istart(1) = nlon1
41:       icount(1) = nlon
42:       istart(2) = nlat1
43:       icount(2) = nlat
44:       istart(3) = nlev1
45:       icount(3) = nlev
46:       istart(4) = ntim1
47:       icount(4) = ntim
48:  
49:       iflag = nf90_inq_varid(idcdf,vnam,invarid)
50:       if (iflag /= nf90_noerr) go to 920
51: 
52:       iflag = nf90_get_var(idcdf,invarid,vals,istart,icount)
53:       if (iflag /= nf90_noerr) go to 920
54: 
55:       iflag = nf90_get_att(idcdf,invarid,'long_name',lnam)
56:       if (iflag /= nf90_noerr) go to 920
57: 
58:       iflag = nf90_get_att(idcdf,invarid,'units',units)
59:       if (iflag /= nf90_noerr) go to 920
60:  
61:       return
62: 
63:  920  write (6, *) 'ERROR: An error occurred while attempting to ',     &
64:             &      'read variable ', vnam , ' at time ', ntim1
65:       write (6, *) nf90_strerror(iflag)
66: 
67:       stop 'READ ERROR'
68: 
69:       end subroutine readcdfr4
</PRE>

<HR>

</BODY>
</HTML>
